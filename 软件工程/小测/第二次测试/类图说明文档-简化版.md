# 宾馆管理信息系统类图说明文档（简化版）

## 一、类图概述

本简化类图基于用例图设计，采用三层架构模式：
- **实体层（Entity Layer）**：数据实体类
- **控制层（Controller Layer）**：业务逻辑控制类
- **边界层（Boundary Layer）**：用户界面类

本版本保留了系统的核心类，简化了命名和属性，便于理解系统的主要结构和关系。

## 二、类图结构

### 2.1 实体类（Entity Classes）

#### User - 用户基类
**职责**：所有系统用户的基础类
**属性**：
- `id`: 用户ID
- `name`: 用户名
- `pwd`: 密码
- `role`: 用户角色

**方法**：
- `login()`: 登录
- `logout()`: 登出

#### Customer - 订房人
**职责**：继承自User，代表订房人
**属性**：
- `id`: 订房人ID
- `name`: 姓名
- `phone`: 电话

**方法**：
- `register()`: 注册账户
- `makeReservation()`: 预订客房

#### Receptionist - 前台服务员
**职责**：继承自User，代表前台服务员
**属性**：
- `id`: 员工ID
- `name`: 姓名
- `staffNo`: 工号

**方法**：
- `processReservation()`: 处理预订
- `processCheckIn()`: 处理入住
- `processCheckOut()`: 处理退房

#### Housekeeper - 客房服务员
**职责**：继承自User，代表客房服务员
**属性**：
- `id`: 员工ID
- `name`: 姓名
- `staffNo`: 工号

**方法**：
- `updateRoomStatus()`: 更新客房状态（打扫、报修等）

#### Manager - 宾馆经理
**职责**：继承自User，代表宾馆经理
**属性**：
- `id`: 员工ID
- `name`: 姓名
- `staffNo`: 工号

**方法**：
- `manageRoom()`: 管理客房信息
- `viewReport()`: 查看业务报表

#### Admin - 系统管理员
**职责**：继承自User，代表系统管理员
**属性**：
- `id`: 员工ID
- `name`: 姓名
- `staffNo`: 工号

**方法**：
- `manageUser()`: 管理用户账户
- `configSystem()`: 配置系统参数

#### Guest - 旅客
**职责**：代表实际入住的旅客
**属性**：
- `id`: 旅客ID
- `name`: 姓名
- `idCard`: 身份证号码
- `type`: 旅客属性（如金卡、团队客、散客）

**方法**：
- `checkIn()`: 办理入住
- `checkOut()`: 办理退房

#### Room - 客房
**职责**：代表宾馆客房
**属性**：
- `id`: 客房编号
- `type`: 客房类型（单人间、双人间、家庭房）
- `status`: 客房状态
- `price`: 单价（元/日）

**方法**：
- `queryStatus()`: 查询状态
- `updateStatus()`: 更新状态

#### Order - 订单
**职责**：代表预订订单
**属性**：
- `id`: 订单编号
- `createDate`: 订单产生日期
- `checkInDate`: 预订入住日期
- `deposit`: 保证金
- `status`: 订单状态

**方法**：
- `create()`: 创建订单
- `modify()`: 修改订单
- `cancel()`: 取消订单

#### Payment - 支付记录
**职责**：记录支付和退款信息
**属性**：
- `id`: 支付ID
- `amount`: 金额
- `date`: 支付日期

**方法**：
- `process()`: 处理支付
- `refund()`: 处理退款

### 2.2 控制类（Controller Classes）

#### AuthController - 认证控制器
**职责**：处理用户注册、登录、登出等认证相关业务
**方法**：
- `register()`: 注册用户
- `login()`: 用户登录
- `logout()`: 用户登出

#### ReservationController - 预订控制器
**职责**：处理客房预订相关业务
**方法**：
- `browseRooms()`: 浏览客房信息
- `createOrder()`: 创建预订
- `modifyOrder()`: 修改预订
- `cancelOrder()`: 取消预订
- `queryOrder()`: 查询订单

#### CheckInController - 入住控制器
**职责**：处理旅客入住登记业务
**方法**：
- `queryOrder()`: 查询订单
- `recordGuest()`: 录入旅客信息
- `assignRoom()`: 分配客房
- `calcCost()`: 计算预估费用

#### CheckOutController - 退房控制器
**职责**：处理旅客退房结账业务
**方法**：
- `queryOrder()`: 查询订单
- `calcCost()`: 计算实际费用（考虑折扣）
- `processPayment()`: 处理支付
- `complete()`: 完成退房

#### RoomController - 客房管理控制器
**职责**：处理客房信息管理业务
**方法**：
- `queryRoom()`: 查询客房
- `addRoom()`: 添加客房
- `updateRoom()`: 更新客房信息
- `updateStatus()`: 更新客房状态

### 2.3 边界类（Boundary Classes）

#### Web - 网页界面
**职责**：订房人使用的网页界面
**方法**：
- `displayInfo()`: 显示宾馆信息
- `displayForm()`: 显示各种表单（注册、登录、预订等）

#### Reception - 前台界面
**职责**：前台服务员使用的界面
**方法**：
- `displayStatus()`: 显示客房状态
- `displayForm()`: 显示各种表单（查询、入住、退房、报修等）

#### Management - 管理界面
**职责**：宾馆经理和管理员使用的管理界面
**方法**：
- `displayManagement()`: 显示管理功能（客房管理、用户管理等）

## 三、类之间的关系

### 3.1 继承关系
- `Customer` 继承自 `User`（订房人）
- `Receptionist` 继承自 `User`（前台服务员）
- `Housekeeper` 继承自 `User`（客房服务员）
- `Manager` 继承自 `User`（宾馆经理）
- `Admin` 继承自 `User`（系统管理员）

### 3.2 关联关系
- `Order` 与 `Customer`：订单属于订房人
- `Order` 与 `Guest`：订单关联旅客
- `Order` 与 `Room`：订单预订客房
- `Guest` 与 `Room`：旅客入住客房
- `Order` 与 `Payment`：订单包含支付记录

### 3.3 依赖关系
- **控制类依赖实体类**：控制类通过依赖关系操作实体类
  - `AuthController` 依赖 `User`
  - `ReservationController` 依赖 `Order` 和 `Room`
  - `CheckInController` 依赖 `Order`、`Guest` 和 `Room`
  - `CheckOutController` 依赖 `Order` 和 `Payment`
  - `RoomController` 依赖 `Room`

- **边界类依赖控制类**：界面类通过依赖关系调用控制类
  - `Web` 依赖 `AuthController` 和 `ReservationController`
  - `Reception` 依赖 `ReservationController`、`CheckInController`、`CheckOutController`、`RoomController`
  - `Management` 依赖 `RoomController`

## 四、设计模式说明

### 4.1 三层架构模式
1. **实体层**：包含系统的核心数据实体
2. **控制层**：包含业务逻辑处理控制器
3. **边界层**：包含用户交互界面

### 4.2 MVC模式
- **Model（模型）**：实体类（User、Customer、Guest、Room、Order、Payment）
- **View（视图）**：边界类（Web、Reception、Management）
- **Controller（控制器）**：控制类（AuthController、ReservationController等）

### 4.3 单一职责原则
每个类只负责一个明确的职责：
- 实体类负责数据表示
- 控制类负责业务逻辑处理
- 边界类负责用户交互

## 五、关键业务流程

### 5.1 预订流程
```
订房人 → Web → AuthController → User (登录)
订房人 → Web → ReservationController → Order (创建订单)
ReservationController → Room (更新客房状态)
Order → Payment (处理保证金支付)
```

### 5.2 入住流程
```
旅客 → Reception → ReservationController → Order (查询订单)
Reception → CheckInController → Guest (创建旅客信息)
CheckInController → Room (分配客房)
CheckInController → Order (更新订单状态)
```

### 5.3 退房流程
```
旅客 → Reception → CheckOutController → Order (查询订单)
CheckOutController → Order (计算实际费用)
CheckOutController → Payment (处理支付/退款)
CheckOutController → Room (更新客房状态)
```

## 六、类统计

### 6.1 实体类（11个）
- User（用户基类）
- Customer（订房人）
- Receptionist（前台服务员）
- Housekeeper（客房服务员）
- Manager（宾馆经理）
- Admin（系统管理员）
- Guest（旅客）
- Room（客房）
- Order（订单）
- Payment（支付）

### 6.2 控制类（5个）
- AuthController（认证控制器）
- ReservationController（预订控制器）
- CheckInController（入住控制器）
- CheckOutController（退房控制器）
- RoomController（客房管理控制器）

### 6.3 边界类（3个）
- Web（网页界面）
- Reception（前台界面）
- Management（管理界面）

### 总计：19个核心类

## 七、扩展说明

本简化版本保留了系统的核心功能，便于理解系统架构。在实际开发中，可以根据需要扩展：

1. **新增实体类**：如Eqpment（设备）、Furniture（家具）等
2. **新增控制类**：如RepairController（维修控制器）、ReportController（报表控制器）等
3. **新增边界类**：根据不同的用户角色和功能模块添加更多界面类
4. **添加枚举类型**：为状态、类型等添加枚举定义，提高代码可维护性

## 八、与用例图的对应关系

| 用例 | 对应的控制类 | 对应的边界类 |
|------|-------------|-------------|
| UC-002 注册账户 | AuthController | Web |
| UC-003 登录系统 | AuthController | Web |
| UC-004 在线预订客房 | ReservationController | Web |
| UC-004A 前台预订客房 | ReservationController | Reception |
| UC-005 修改预订信息 | ReservationController | Web/Reception |
| UC-006 取消预订 | ReservationController | Web/Reception |
| UC-007 办理入住登记 | CheckInController | Reception |
| UC-008 办理退房结账 | CheckOutController | Reception |
| UC-009 查询客房状态 | RoomController | Reception |
| UC-010 查询订单信息 | ReservationController | Web/Reception |
| UC-013 管理客房信息 | RoomController | Management |

