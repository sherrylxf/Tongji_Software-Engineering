SITP 项目板块

介绍
通过爬取同济大学 SITP 科创平台的公开
项目信息，并结合项目特征向量与学生画像，提供智能化的科研项目匹配与推荐服务。同时，
为提升科研项目信息的可理解性，我们计划接入 AI 助手，使学生可以通过对话方式了解各
科研项目的内容、要求、导师期望及面试准备建议，并在确认报名后跳转至 SITP 官方页面
完成申请流程。


1.在 SITP 项目模块的设计中，我们通过分层架构实现项目数据的采集、管理和分发。控
制层由 ProjectController 负责接收前端请求，包括项目浏览、搜索和手动更新操作，并将具
体业务逻辑委托给 Service 层处理。ProjectService 作为核心业务协调者，管理着整个项目生
命周期，它定期通过 SITPCrawler 从官方网站采集项目信息，在申报高峰期间增加爬取频率
至每周一次，平常时期维持每月更新节奏，确保数据的实时性和完整性。采集到的项目数据
通过 ProjectRepository 持久化到数据库，其中 Project 领域模型完整封装了项目所有属性，
包括所属批次、学科分类、指导教师特长、项目描述和学生要求等关键信息。

2.在 SITP 项目模块，我们引入了一个 AI 助手，帮助学生更好的了解 SITP 项目，实现学生
与科研项目的智能匹配分析。核心交互流程始于用户身份验证后，系统从用户档案服务获取
学生的课程背景、技能标签、项目经历等结构化数据，同时从当前页面上下文提取目标 SITP
项目的详细描述、技能要求和导师信息。当学生发起咨询请求时，请求分发器根据咨询类型
动态选择对应的提示词模板：项目匹配分析模板将学生画像与项目需求进行多维度对比，技
能评估模板专注于学生能力图谱的构建，自由问答模板则支持开放式对话场景。
 提示词引擎采用抽象工厂模式，通过AbstractPrompt基类定义统一的提示词构建接口，
其具体子类负责不同场景的上下文组装。ProjectAnalysisPrompt 整合用户档案、项目信息和
历史对话生成结构化分析请求，UserSkillAssessmentPrompt 聚焦于学生能力的量化评估，
FreeQuestionPrompt 维持对话连贯性。构建完成的提示词通过 LLM 服务发送至大语言模型，
生成的响应内容既包含自然语言分析说明，也封装了结构化的匹配度评分、技能差距分析和
学习路径建议。
 系统通过 Conversation 聚合根持久化完整的交互轨迹，每条对话记录包含用户原始输
入、实际发送的提示词、模型原始响应和时间戳元数据。这种设计保证了对话历史的可追溯
性，同时为后续的模型优化提供数据支撑。

3.整体架构
我们采用了“核心单体 + 专用微服务”的混合式模式。之
所以选择这种结构，是因为我们在需求分析中发现，用户体系、组队逻辑、课程/竞赛/科研
三类组队的业务规则具有较强的一致性和高内聚度，因此将它们放在同一个核心应用内部，
可以减少领域之间的通信开销，同时让业务规则更容易维护。而在智能推荐和 AI 问答等计
算密集型、迭代速度快的模块中，我们则引入了独立的 Python 微服务，使这些能力可以独
立扩展与优化，不会对核心系统造成影响。
 从整体上看，客户端主要包括 Web 前端，所有请求首先经过 API Gateway，再路由到
核心单体应用或外部微服务。核心部分由多个领域子模块组成：用户领域负责维护用户的基
本信息和权限控制；组队共享内核抽象出团队、申请、匹配策略等通用结构，并被课程组队、
竞赛组队与科研项目域继承；课程域通过同济开放 API 获取学生课程信息；竞赛域和科研
域则分别维护项目数据和申请流程。这样的划分使我们可以在一个单体中保持领域清晰，同
时避免早期过度微服务化带来的复杂性。
 为了增强系统的智能性，我们将推荐系统和 AI 助手设计为独立的微服务。推荐服务需
要频繁实验算法模型并迭代策略，如果放在核心应用内部会影响稳定性；而拆成独立服务后，
可以通过跨服务 API 与核心应用交互，获取用户、项目、组队等特征数据，最终把推荐结
果回传给竞赛或科研模块。AI 服务同样采用独立部署，以便更灵活地调用外部大模型 API，
并使用自己的数据库进行缓存与上下文管理。为了支持更多的数据来源，我们还设计了爬虫
服务，用于收集科研项目（SITP）的原始信息，并通过数据处理模块送入科研域，保证数据
结构一致性。
 在基础设施层，我们使用 PostgreSQL 存储核心结构化数据，Redis 作为高性能缓存以
提升用户页面加载速度，并引入 Neo4j 构建知识图谱，为未来的智能推荐与语义查询做准
备。身份认证依赖同济统一认证系统，与校园生态自然对接。

4.系统上下文图（不是最新版的，有待商榷）
```
@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_TOP_DOWN()

' ------------------------
' 整体上下文边界框
' ------------------------
System_Boundary(all, "系统上下文图") {

  ' ------------------------
  ' 顶部：使用者
  ' ------------------------
  Person(user, "学生用户", "使用系统推荐项目、AI 模拟面试、自由组队")

  ' ------------------------
  ' 中间：系统内部（主系统）
  ' ------------------------
  System_Boundary(sys, "主系统") {

    ' ----- 上侧 -----
    System(aiInterview, "AI 面试服务", "通过智能解读项目需求与学生背景，提供精准的匹配度分析和个性化学习建议")
    System(recommend, "推荐服务", "根据用户信息与项目数据推荐项目")

    ' ----- 新增：个人中心 -----
    System(profile, "个人中心模块", "管理用户学籍信息、课程记录、技能标签等，为 AI 面试与推荐服务提供用户数据")

    ' ----- 下侧 -----
    System(free, "自由组队模块", "用户发起项目与组队")
    System(course, "课程项目模块", "用户发起课程项目的组队")
    System(sitp, "SITP 项目模块", "展示 SITP 项目信息")
  }


  ' ------------------------
  ' 底部：外部系统
  ' ------------------------
  System_Boundary(ext, "外部系统") {

    System_Ext(tongjiApi, "同济大学开放平台 API", "提供系统所需数据")
    System_Ext(webCrawler, "网络爬虫", "定时从 SITP 官网抓取项目信息")
    System_Ext(aiModel, "LLM API", "AI 模拟面试问答")
  }
}

' ------------------------
' 用户交互
' ------------------------
Rel(user, course, "课程项目招募组队")
Rel(user, sitp, "寻找适合的 SITP 项目")
Rel(user, free, "自由项目招募组队")
Rel(user, recommend, "获取推荐项目")
Rel(user, aiInterview, "AI 模拟面试")
Rel(user, profile, "查看/修改个人信息")

' ------------------------
' 外部项目数据来源
' ------------------------
Rel(course, tongjiApi, "获取课程项目数据")
Rel(sitp, webCrawler, "爬取 SITP 项目信息")

' ------------------------
' 新增：个人中心依赖
' ------------------------
Rel(profile, tongjiApi, "获取用户学籍信息/课程记录")

' ------------------------
' 推荐服务依赖
' ------------------------
Rel(recommend, sitp, "读取项目数据")
Rel(recommend, free, "读取项目数据")
Rel(recommend, profile, "读取用户个人数据")

' ------------------------
' AI 面试服务依赖
' ------------------------
Rel(aiInterview, sitp, "读取项目信息")
Rel(aiInterview, aiModel, "发送 Prompt")
Rel(aiInterview, profile, "读取用户背景信息")

@enduml
```
系统上下文图清晰地展示了项目整体架构中各组件的关系边界。如图所示，系统以学生
用户为中心，通过五大核心模块提供服务：课程项目模块对接同济大学开放平台 API 获取课
程数据，支持课程组队；SITP 项目模块依赖网络爬虫获取 SITP 项目信息；自由组队模块支
持用户自主发起项目；推荐服务通过综合分析用户画像和项目特征提供个性化推荐；AI 面
试服务则结合用户背景和项目需求，调用外部大语言模型 API 提供模拟面试服务。
所有模块均围绕个人中心模块构建数据依赖，该模块作为用户数据的统一管理枢纽，从
同济 API 同步学籍信息和课程记录，并为推荐服务和 AI 面试服务提供完整的用户画像支持。
这种设计确保了用户数据的一致性，同时使各功能模块能够专注于自身业务逻辑，通过清晰
的接口协作形成完整的服务闭环。
