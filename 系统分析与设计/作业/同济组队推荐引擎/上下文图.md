@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_TOP_DOWN()

' ------------------------
' 整体上下文边界框
' ------------------------
System_Boundary(all, "系统上下文图") {

  ' ------------------------
  ' 顶部：使用者
  ' ------------------------
  Person(user, "学生用户", "使用系统推荐项目、AI 模拟面试、自由组队")

  ' ------------------------
  ' 中间：系统内部（主系统）
  ' ------------------------
  System_Boundary(sys, "主系统") {

    ' ----- 上侧 -----
    System(aiInterview, "AI 面试服务", "通过智能解读项目需求与学生背景，提供精准的匹配度分析和个性化学习建议")
    System(recommend, "推荐服务", "根据用户信息与项目数据推荐项目")

    ' ----- 新增：个人中心 -----
    System(profile, "个人中心模块", "管理用户学籍信息、课程记录、技能标签等，为 AI 面试与推荐服务提供用户数据")

    ' ----- 下侧 -----
    System(free, "自由组队模块", "用户发起项目与组队")
    System(course, "课程项目模块", "用户发起课程项目的组队")
    System(sitp, "SITP 项目模块", "展示 SITP 项目信息")
  }


  ' ------------------------
  ' 底部：外部系统
  ' ------------------------
  System_Boundary(ext, "外部系统") {

    System_Ext(tongjiApi, "同济大学开放平台 API", "提供系统所需数据")
    System_Ext(webCrawler, "网络爬虫", "定时从 SITP 官网抓取项目信息")
    System_Ext(aiModel, "LLM API", "AI 模拟面试问答")
  }
}

' ------------------------
' 用户交互
' ------------------------
Rel(user, course, "课程项目招募组队")
Rel(user, sitp, "寻找适合的 SITP 项目")
Rel(user, free, "自由项目招募组队")
Rel(user, recommend, "获取推荐项目")
Rel(user, aiInterview, "AI 模拟面试")
Rel(user, profile, "查看/修改个人信息")

' ------------------------
' 外部项目数据来源
' ------------------------
Rel(course, tongjiApi, "获取课程项目数据")
Rel(sitp, webCrawler, "爬取 SITP 项目信息")

' ------------------------
' 新增：个人中心依赖
' ------------------------
Rel(profile, tongjiApi, "获取用户学籍信息/课程记录")

' ------------------------
' 推荐服务依赖
' ------------------------
Rel(recommend, sitp, "读取项目数据")
Rel(recommend, free, "读取项目数据")
Rel(recommend, profile, "读取用户个人数据")

' ------------------------
' AI 面试服务依赖
' ------------------------
Rel(aiInterview, sitp, "读取项目信息")
Rel(aiInterview, aiModel, "发送 Prompt")
Rel(aiInterview, profile, "读取用户背景信息")

@enduml